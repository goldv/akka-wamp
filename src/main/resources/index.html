<html>
<head>

  <script type="text/javascript" src="js/autobahn.js"></script>
</head>
<body>
  <script>
    var connection = new autobahn.Connection({
      url: 'ws://localhost:9090/ws-greeter',
      realm: 'realm1'
    });

    connection.onopen = function (session) {
      console.log("session open")

      var count = 0
      session.subscribe('com.myapp.hello', function(event){
        console.log("event received " + event + " count = " + count)
        count++
        //if(count == 9) connection.close()
      });
    }

    connection.onclose = function(reason, details){
      console.log("closing")
      console.log(reason)
      console.log(details.message)
      console.log(details.reason)
    }

    connection.open()


  </script>
</body>


</html>