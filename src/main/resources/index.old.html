<html>
<head>

  <script type="text/javascript" src="js/autobahn.js"></script>
</head>
<body>
  <script>
    var connection = new autobahn.Connection({
      url: 'ws://localhost:9090/ws-greeter',
      realm: 'realm1'
    });

    connection.onopen = function (session) {
      console.log("session open")
      subscribe("algotrader.marketdata.EURUSD", session)
      subscribe("algotrader.marketdata.EURCHF", session)
      subscribe("algotrader.marketdata.USDGBP", session)
    }

    function subscribe(topic, session){
      session.subscribe(topic, function(event){
        console.log("event received " + event + " topic = " + topic)
      });
    }

    connection.onclose = function(reason, details){
      console.log("closing")
      console.log(reason)
      console.log(details.message)
      console.log(details.reason)
    }

    connection.open()


  </script>
</body>


</html>